#define $bt 1->2{^X: $end; ^Y: $end;}
#define PRINT(x) HOST("cout << ",x,"->GetValue() << endl;")
global $bt a(1,2);
s=new a(1 of 2);
String msg1="Sending Y";
PRINT(msg1);
s[2]<<^Y;
|
s=new a(2 of 2);
s[1]>>
{ ^X: String msg2="Received X";
      PRINT(msg2);
  ^Y: String msg3="Received Y";
      PRINT(msg3);
}
